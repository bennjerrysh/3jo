<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- css only -->

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link rel="shortcut icon" href="../images/mainlogo_footer.png">
	<!-- javascript bundle with popper -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>
	<style>
		button {
			background: #5b90f0;
			color: white;
			display: block;
			width: 92.5%;
			max-width: 680px;
			height: 50px;
			border-radius: 8px;
			margin: 0 auto;
			border: none;
			cursor: pointer;
			font-size: 14px;
			font-family: "Montserrat", sans-serif;
			box-shadow: 0 15px 30px rgba(25, 86, 216, 0.36);
			transition: 0.2s linear;
		}

		button:hover {
			box-shadow: 0 0 0 rgba(233, 30, 99, 0);
		}
	</style>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
	<script type="text/javascript">
	$("#checkEmail").click(function () {
        let userEmail = $("#userEmail").val();
        let userName = $("#userName").val();

        $.ajax({
            type: "GET",
            url: "/check/findPw",
            data: {
                "userEmail": userEmail,
                "userName": userName
            },
            success: function (res) {
                if (res['check']) {
                    swal("발송 완료!", "입력하신 이메일로 임시비밀번호가 발송되었습니다.", "success").then((OK) => {
                        if(OK) {
                            $.ajax({
                                type: "POST",
                                url: "/check/findPw/sendEmail",
                                data: {
                                    "userEmail": userEmail,
                                    "userName": userName
                                }
                            })
                            window.location = "/login";
                        }


                    }
                )
                    $('#checkMsg').html('<p style="color:darkblue"></p>');
                } else {
                    $('#checkMsg').html('<p style="color:red">일치하는 정보가 없습니다.</p>');
                }
            }
        })
    })
	</script>
</head>

<body>

	<div style="margin-bottom: 130px; margin-top: 100px;">
		<form action="" name="frm">
			<div style="width: 50%; margin: auto; position: relative; top: 100;">
				<div style="margin: auto;">
					<p style="font-weight: bold; font-size: 45px; text-align: center; color: #5b90f0;">비밀번호 찾기</p>
				</div>
				<div class="mb-3" style="margin: auto; position: relative; left: 120px;">
					<label for="exampleFormControlInput1" class="form-label">
						이름</label> <input type="text" class="form-control border border-2 rounded-start" value=""
						name="userName" id="userName" placeholder="이름을 입력하세요."
						style="width: 70%; padding-top:15px; padding-bottom:15px;">
				</div>
				<div class="mb-3" style="margin: auto; position: relative; left: 120px;">
					<label for="exampleFormControlTextarea1" class="form-label">이메일</label>
					<input type="text" class="form-control border border-2 rounded-start" maxlength="11" value=""
						id="userEmail" name="userEmail" placeholder="회원님이 등록한 이메일을 입력하세요."
						style="width: 70%; padding-top:15px; padding-bottom:15px;"></text>
				</div>
				<br>
				<button type="button" id="checkEmail" style="width: 70%; padding-top:15px; padding-bottom:20px; margin-left: 122px; ">
					이메일 발송</button>
			</div>
		</form>
	</div>

</body>