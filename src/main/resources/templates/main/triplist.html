<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<link th:href="@{/css/main.css}" rel="stylesheet" />
<link th:href="@{/css/productlist.css}" rel="stylesheet" />
<head>
<th:block layout:fragment="header" th:include="@{/main/header}"></th:block>
<meta charset="UTF-8">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" />
<title>Insert title here</title>
</head>
<body>

	<div class="menu_bar">
		<div class="menu_barimg">
			<i class="fas fa-th-large"></i>
		</div>
		<span>카테고리</span>
	</div>
	
	<table>
		<tr>
			<th>이미지</th>
			<th>제목</th>
			<th>가격</th>
			<th>♥</th>
		</tr>
		<tr th:each="dto : ${list }">
			<td><img th:src="@{/image/mainimage/} + ${dto.image}" /></td>
			<td th:text="${dto.title}"></td>
			<td th:text="${dto.price}"></td>
			<td th:text="${dto.like}"></td>
		</tr>
	</table>
	
	
	<script>
	const Products = [
		{
		image: '../image/test.jpg',
	    title: '뉴밋',
	    price: 1000,
	    only: true,
	    hot: true,
	  }];
	
	const pListSection = document.getElementById('productList');
	 const productItem = new ProductItem(pListSection);
	 
	 	function ProductItem(pListSection) {
	 		const Products = pListSection.querySelector('.product');
	 		
	  		const updateProductFnc = (productItems, title,moreBtnRef) => {
	  			const moreBtn = moreBtnRef.length>0 ?'<a class="product_more" href='+moreBtnRef+'>전체보기</a>':'';
	  			 const titleValue = title ? '<div class="product_title"><h2>'+title+'</h2>'+moreBtn+'</div>' : '';
	  			let onlyValue='';
	  	  		let hotValue='';
	  	  		let priceValue = '';
	  	  		
	  			const test = productItems.map((item) => {
	  				onlyValue = item.only ? "<span class='info_only'>ONLY</span>" : '';
					hotValue = item.hot ? "<span class='info_hot'>HOT</span>" : '' ;
					
					priceValue ="<span class='price_current'>" + item.price +"원</span>"
					 
		
			return "<div class='product_item'><a href ='productlist?p_no="+item.p_no+"'><div class='product_item_img'><img src='"+item.image + "'/></div></a> <span class='product_item_name'>" + item.title + "</span> <div class='product_item_price'>" +priceValue + "</div><span><div class='product_item_info'>"+ onlyValue + hotValue +"</div><div class='product_item_info'></span>"+ "</div></div>"}).join('');
	            
	  	  	return titleValue+ "<div class='product_items'>"+ test + "</div>"; 
	  	  	  	      };
	  		
	  		
	 		const render = () => {
	 			bestList.innerHTML = updateProductFnc(Products, '뉴밋',''); /* 모임 */

	 		}
	 	 render();
	}
	</script>
	<th:block layout:fragment="footer" th:include="@{/main/footer}"></th:block>
</body>
</html>